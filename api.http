@baseUrl = http://localhost:3000

# -----------------------
# User & Wallet Creation
# -----------------------

### Create User 1 (Sender)
# @name createUser1
POST {{baseUrl}}/user
Content-Type: application/json

{
  "name": "Alice Sender",
  "email": "alice@example.com",
  "password": "securePassword123"
}

### Create User 2 (Receiver)
# @name createUser2
POST {{baseUrl}}/user
Content-Type: application/json

{
  "name": "Bob Receiver",
  "email": "bob@example.com",
  "password": "securePassword123"
}

# -----------------------
# Wallet Operations
# -----------------------

# Capture wallet IDs from previous responses (Manual update required if not supported)
# Or just use the IDs returned from the create user calls.
# Assuming standard UUIDs or IDs. Replace :id with actual wallet IDs.

### Get Wallet Details (Alice)
@aliceWalletId = 1
GET {{baseUrl}}/wallet/{{aliceWalletId}}

### Fund Wallet (Alice) - Add $1000
POST {{baseUrl}}/wallet/{{aliceWalletId}}/fund
Content-Type: application/json

{
  "amount": 1000
}

### Check Balance (Alice) after funding
GET {{baseUrl}}/wallet/{{aliceWalletId}}

# -----------------------
# Transfers
# -----------------------

### Transfer from Alice to Bob ($200)
@bobWalletId = 2
POST {{baseUrl}}/wallet/{{aliceWalletId}}/transfer
Content-Type: application/json

{
  "receiverWalletId": "{{bobWalletId}}",
  "amount": 200,
  "description": "Lunch money"
}

### Check Wallet Details (Alice) 
GET {{baseUrl}}/wallet/{{aliceWalletId}}

### Check Wallet Details (Bob) 
GET {{baseUrl}}/wallet/{{bobWalletId}}

# -----------------------
# Error Scenarios
# -----------------------

### Insufficient Funds Transfer
POST {{baseUrl}}/wallet/{{aliceWalletId}}/transfer
Content-Type: application/json

{
  "receiverWalletId": "{{bobWalletId}}",
  "amount": 9000,
  "description": "Too much money"
}

### Negative Amount Fund
POST {{baseUrl}}/wallet/{{aliceWalletId}}/fund
Content-Type: application/json

{
  "amount": -50
}

# -----------------------
# Idempotency Tests
# -----------------------

### Fund Wallet with Idempotency Key (First Call)
POST {{baseUrl}}/wallet/{{aliceWalletId}}/fund
Content-Type: application/json

{
  "amount": 100,
  "idempotencyKey": "unique-fund-key-123"
}

### Fund Wallet with SAME Idempotency Key (Should return same transaction, no double fund)
POST {{baseUrl}}/wallet/{{aliceWalletId}}/fund
Content-Type: application/json

{
  "amount": 100,
  "idempotencyKey": "unique-fund-key-123"
}

